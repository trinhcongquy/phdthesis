\begin{figure}
\center 
%%%%%%%%%NEXT FIGURE%%%%%%%%%%
\begin{tikzpicture}[]%show background rectangle]

\node[name=cell0,minimum width=16pt, minimum height=120pt]{};


\node[rounded corners,draw,name=cell1,minimum width=24pt, minimum height=20pt] at ($(cell0.east)+(0pt,40pt)$){};
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell1.west)
{$\pi_1$};
%\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell1.north){$\tt t_1$};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell1.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell1.south){\cross};

\node[name=succ1,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell1.east)+(-4pt,0pt)$) {};


\node[circle,draw,font=\tiny,inner sep=1pt,fill=red!5] at ($(cell1.north)+(24.5pt,11pt)$) {$\tt v_1$};


\node[anchor=south,font=\tiny,align=center] at ($(cell1.north)+(0pt,-2pt)$) {{$\tt head$}};

\node[anchor=south,font=\tiny,align=center] at ($(cell1.south)+(0pt,-13pt)$) {{$\tt head$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell1.south)+(0pt,-20pt)$) {{$\tt tail$}};



\node[rounded corners,draw,name=cell21,minimum width=24pt, minimum height=20pt] at ($(cell1.east)+(30pt,0pt)$){};
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell21.west)
{$\pi_1$};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell21.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell21.south){\tick};
\node[name=succ21,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell21.east)+(-4pt,0pt)$) {};
\node[anchor=south,font=\tiny,align=center] at ($(cell21.north)+(0pt,-2pt)$) {{$\tt p$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell21.south)+(0pt,-13pt)$) {{$\tt head$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell21.south)+(0pt,-20pt)$) {{$\tt tail$}};

\draw[->] (succ1) to node[above=0pt,pos=0.5] {\footnotesize$<$} (cell21);



\node[rounded corners,draw,name=cell22,minimum width=24pt, minimum height=20pt] at ($(cell21.east)+(30pt,0pt)$){};
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell22.west)
{$\pi_1$};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell22.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell22.south){\tick};
\node[name=succ22,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell22.east)+(-4pt,0pt)$) {};
\node[anchor=south,font=\tiny,align=center] at ($(cell22.north)+(0pt,-2pt)$) {{$\tt p$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell22.south)+(0pt,-13pt)$) {{$\tt head$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell22.south)+(0pt,-20pt)$) {{$\tt tail$}};
\node[circle,draw,font=\tiny,inner sep=1pt,fill=red!5] at ($(cell22.north)+(24.5pt,11pt)$) {$\tt v_2$};


\node[rounded corners,draw,name=cell31,minimum width=24pt, minimum height=20pt]
at ($(cell22.east)+(30pt,0pt)$){};
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell31.west)
{$\pi_2$};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell31.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell31.south){\cross};
\node[name=succ31,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell31.east)+(-4pt,0pt)$) {};
\node[anchor=south,font=\tiny,align=center] at ($(cell31.north)+(0pt,-2pt)$) {{$$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell31.south)+(0pt,-13pt)$) {{$\tt head$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell31.south)+(0pt,-20pt)$) {{$\tt tail$}};



\node[rounded corners,draw,name=cell32,minimum width=24pt, minimum height=20pt]
at ($(cell31.east)+(30pt,0pt)$){};
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell32.west)
{$\pi_2$};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell32.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell32.south){\cross};
\node[name=succ32,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell32.east)+(-4pt,0pt)$) {};

%\node[anchor=south,font=\tiny,align=center] at ($(cell32.north)+(0pt,-2pt)$) {{$\tt currs[1]$}};
%\node[anchor=south,font=\tiny,align=center] at ($(cell32.north)+(0pt,5pt)$) {{$\tt curr$}};

\node[anchor=south,font=\tiny,align=center] at ($(cell32.south)+(0pt,-13pt)$) {{$\tt head$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell32.south)+(0pt,-20pt)$) {{$\tt tail$}};

\node[circle,draw,font=\tiny,inner sep=1pt,fill=red!5] at ($(cell32.north)+(24.5pt,11pt)$) {$\tt v_3$};

\node[rounded corners,draw,name=cell41,minimum width=24pt, minimum height=20pt] at ($(cell32.east)+(30pt,0pt)$){};
%
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell41.west)
{$\pi_3$};


\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell41.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell41.south){\tick};
\node[name=succ41,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell41.east)+(-4pt,0pt)$) {};

\node[anchor=south,font=\tiny,align=center] at ($(cell41.north)+(0pt,-2pt)$) {{$$}};

\node[anchor=south,font=\tiny,align=center] at ($(cell41.south)+(0pt,-13pt)$) {{$\tt head$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell41.south)+(0pt,-20pt)$) {{$\tt tail$}};

\draw[->] (succ22) to node[above=0pt,pos=0.5] {\footnotesize$<$} (cell31);
\draw[->] (succ32) to node[above=0pt,pos=0.5] {\footnotesize$<$} (cell41);
%% LAST LIST

\node[rounded corners,draw,name=cell13,minimum width=24pt, minimum height=20pt] at ($(cell0.east)+(0pt,-20pt)$){};
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell13.west)
{$\pi_3$};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell13.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell13.south){\tick};
\node[name=succ13,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell13.east)+(-4pt,0pt)$) {};


\node[anchor=south,font=\tiny,align=center] at ($(cell13.south)+(0pt,-13pt)$) {{$\tt head$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell13.south)+(0pt,-20pt)$) {{$\tt tail$}};

%\node[anchor=south,font=\tiny,align=center] at ($(cell13.north)+(0pt,-2pt)$) {{{$\tt preds[1]$}}};
%\node[anchor=south,font=\tiny,align=center] at ($(cell13.north)+(0pt,5pt)$) {{{$\tt pred$}}};


\node[rounded corners,draw,name=cell231,minimum width=24pt, minimum height=20pt] at ($(cell13.east)+(30pt,0pt)$){};
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell231.west)
{$\pi_3$};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell231.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell231.south){\cross};
\node[name=succ231,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell231.east)+(-4pt,0pt)$) {};

\node[anchor=south,font=\tiny,align=center] at ($(cell231.south)+(0pt,-13pt)$) {{$\tt head$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell231.south)+(0pt,-20pt)$) {{$\tt tail$}};
%\node[anchor=south,font=\tiny,align=center] at ($(cell231.north)+(0pt,-2pt)$) {{{$\tt currs[higher]$}}};

\node[circle,draw,font=\tiny,inner sep=1pt,fill=red!5] at ($(cell13.north)+(24.5pt,11pt)$) {$\tt v_4$};

\node[rounded corners,draw,name=cell232,minimum width=24pt, minimum height=20pt] at ($(cell231.east)+(30pt,0pt)$){};
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell232.west)
{$\pi_3$};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell232.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell232.south){\cross};
\node[name=succ232,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell232.east)+(-4pt,0pt)$) {};
\node[anchor=south,font=\tiny,align=center] at ($(cell232.south)+(0pt,-13pt)$) {{$\tt head$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell232.south)+(0pt,-20pt)$) {{$\tt tail$}};
%\node[anchor=south,font=\tiny,align=center] at ($(cell232.north)+(0pt,-2pt)$) {{{$\tt currs[higher]$}}};


\draw[->] (succ13) to node[above=0pt,pos=0.5] {\footnotesize$<$} (cell231);


\node[rounded corners,draw,name=cell331,minimum width=24pt, minimum height=20pt] at ($(cell232.east)+(30pt,0pt)$){};
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell331.west)
{$\pi_3$};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell331.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell331.south){\cross};
\node[name=succ331,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell331.east)+(-4pt,0pt)$) {};


\node[anchor=south,font=\tiny,align=center] at ($(cell331.south)+(0pt,-13pt)$) {{$\tt head,tail$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell331.south)+(0pt,-20pt)$) {{$\tt tail$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell331.north)+(0pt,-2pt)$) {{{$\tt tail$}}};
\node[circle,draw,font=\tiny,inner sep=1pt,fill=red!5] at ($(cell232.north)+(24.5pt,11pt)$) {$\tt v_5$};



\draw[->] (succ232) to node[above=0pt,pos=0.5] {\footnotesize$<$} (cell331);


\node[rounded corners,draw,name=cell72,minimum width=24pt, minimum height=20pt] at ($(cell331.east)+(30pt,0pt)$){};
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell72.west)
{$\pi_2$};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell72.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell72.south){\tick};
\node[name=succ72,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell72.east)+(-4pt,0pt)$) {};
\node[anchor=south,font=\tiny,align=center] at ($(cell72.north)+(0pt,-2pt)$) {{$\tt c$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell72.south)+(0pt,-13pt)$) {{$\emptyset$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell72.south)+(0pt,-20pt)$) {{$\tt tail$}};
\node[circle,draw,font=\tiny,inner sep=1pt,fill=red!5] at ($(cell72.north)+(24.5pt,11pt)$) {$\tt v_6$};



\node[rounded corners,draw,name=cell8,minimum width=24pt, minimum height=20pt] at ($(cell72.east)+(30pt,0pt)$){};
\node[minimum width=8pt, minimum height=10pt,anchor=west,font=\tiny,inner sep=0pt,name=d1] at (cell8.west)
{$\pi_3$};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=north,font=\tiny,inner sep=0pt]at (cell8.north){\cross};
\node[draw,minimum width=8pt, minimum height=10pt,anchor=south,font=\tiny,inner sep=0pt]at (cell8.south){\cross};
\node[name=succ8,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell72.east)+(-4pt,0pt)$) {};
%\node[anchor=south,font=\tiny,align=center] at ($(cell8.north)+(0pt,-2pt)$) {{$\tt c$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell8.south)+(0pt,-13pt)$) {{$\tt head$}};
\node[anchor=south,font=\tiny,align=center] at ($(cell8.south)+(0pt,-20pt)$) {{$\tt tail$}};




%\node[name=cell8] at ($(cell72.east)+(20pt,0pt)$){$\bot$};
\draw[->] (succ72) to node[above=0pt,pos=0.5] {\footnotesize$<$} (cell8);

\node[draw, fill = yellow!20, name=cellto,minimum width=150pt, minimum height=10pt,anchor=west]
at ($(cell0.east)+(40pt,-60pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cellto.north west)+(3pt,0pt)$){{$\tt \pi_1 : x \mapsto \set{<}$;\; $\tt \pi_2 : x \mapsto \set{=};\pi_3 : x \mapsto \set{>}$;}};
%\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cellto.north west)+(3pt,-10pt)$){{$\pi_3 : x \mapsto \set{>}$; \; $\pi_4 : x \mapsto \set{=}$}};

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{tikzpicture}
\label{fragmentabs:fig}
\caption{Fragment abstraction of {\tt lazy set} algorithm}
\end{figure}	
